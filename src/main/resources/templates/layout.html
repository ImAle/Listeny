<!doctype html>
<html th:lang="#{principal.lang}" xmlns:th="https://www.thymeleaf.org" xmlns:layout="https://www.ultraq.net.nz/thymeleaf/layout">
<head th:fragment="head">

    <!-- Required meta tags -->
    <meta th:charset="#{principal.charset}">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="">
    <meta name="author" content="">

    <!-- Bootstrap CSS -->
    <link th:href="@{https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css}" rel="stylesheet"
          integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous"/>

    <!-- Estilos personalizados -->
    <link th:href="@{/static/css/custom.css}" type="text/css" rel="stylesheet"/>

    <!-- Bootstarp icons -->
    <link th:href="@{https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.3/font/bootstrap-icons.css}" rel="stylesheet"/>

    <!-- Font Awesome JS -->
    <script th:src="@{https://use.fontawesome.com/releases/v5.0.13/js/solid.js}" defer integrity="sha384-tzzSw1/Vo+0N5UhStP3bvwWPq+uvzCMfrN1fEFe+xBmv1C/AtVX5K0uZtmcHitFZ" crossorigin="anonymous"></script>
    <script th:src="@{https://use.fontawesome.com/releases/v5.0.13/js/fontawesome.js}" defer integrity="sha384-6OIrr52G08NpOFSZdxxz1xdNSndlD4vdcf/q2myIUVO0VsqaGHJsB0RaBE01VTOY" crossorigin="anonymous"></script>

    <!-- Para que el botón despliegue la barra lateral cuando la pantalla sea pequeña -->
    <script th:src="@{/jquery-3.6.0.min.js}"></script>


    <title>Listeny</title>

</head>
<body>


<aside id="sidebar" th:fragment="aside">
    <div class="card my-3" style="height:1400px">
        <img src="/static/imagenes/logo.png" class="card-img-top mx-auto my-3 w-50" alt="...">

        <div class="list-group list-group-flush">
            <a href="#perfil" title="Perfil" class="list-group-item list-group-item-action d-flex justify-content-start align-items-center my-2">
                <i class="fas fa-user fa-lg" style="margin-right: 35px;"></i>
                <h4 class="text-truncate" style="overflow: hidden;">PERFIL</h4>
            </a>
            <a href="#buscador" title="Buscador" class="list-group-item list-group-item-action d-flex justify-content-start align-items-center my-2">
                <i class="fas fa-search fa-lg" style="margin-right: 35px;"></i>
                <h4 class="text-truncate" style="overflow: hidden;">BUSCADOR</h4>
            </a>
            <a href="#subir-canciones" title="Subir canciones" class="list-group-item list-group-item-action d-flex justify-content-start align-items-center my-2">
                <i class="fas fa-upload fa-lg" style="margin-right: 35px;"></i>
                <h4 class="text-truncate" style="overflow: hidden;">SUBIR CANCIONES</h4>
            </a>
            <a href="#crear-lista" title="Crear lista" class="list-group-item list-group-item-action d-flex justify-content-start align-items-center my-2">
                <i class="fas fa-list fa-lg" style="margin-right: 35px;"></i>
                <h4 class="text-truncate" style="overflow: hidden;">CREAR LISTA</h4>
            </a>

            <hr class="hr bg-black" style="border-top: 5px solid">

            <div class="list-group list-group-flush">
                <a href="#playlist-1" title="Playlist 1" class="list-group-item list-group-item-action d-flex justify-content-start align-items-center my-2">
                    <i class="fas fa-play-circle fa-lg" style="margin-right: 35px;"></i>
                    <h5 class="text-truncate text-sm">PLAYLIST 1</h5>
                </a>
                <a href="#playlist-2" title="Playlist 2" class="list-group-item list-group-item-action d-flex justify-content-start align-items-center my-2">
                    <i class="fas fa-play-circle fa-lg" style="margin-right: 35px;"></i>
                    <h5 class="text-truncate text-sm">PLAYLIST 2</h5>
                </a>
                <a href="#playlist-3" title="Playlist 3" class="list-group-item list-group-item-action d-flex justify-content-start align-items-center my-2">
                    <i class="fas fa-play-circle fa-lg" style="margin-right: 35px;"></i>
                    <h5 class="text-truncate text-sm">PLAYLIST 3</h5>
                </a>
                <a href="#playlist-3" title="Playlist 3" class="list-group-item list-group-item-action d-flex justify-content-start align-items-center my-2">
                    <i class="fas fa-play-circle fa-lg" style="margin-right: 35px;"></i>
                    <h5 class="text-truncate text-sm">PLAYLIST 4</h5>
                </a>
                <a href="#playlist-3" title="Playlist 3" class="list-group-item list-group-item-action d-flex justify-content-start align-items-center my-2">
                    <i class="fas fa-play-circle fa-lg" style="margin-right: 35px;"></i>
                    <h5 class="text-truncate text-sm">PLAYLIST 5</h5>
                </a>
                <a href="#playlist-3" title="Playlist 3" class="list-group-item list-group-item-action d-flex justify-content-start align-items-center my-2">
                    <i class="fas fa-play-circle fa-lg" style="margin-right: 35px;"></i>
                    <h5 class="text-truncate text-sm">PLAYLIST 6</h5>
                </a>
                <a href="#playlist-3" title="Playlist 3" class="list-group-item list-group-item-action d-flex justify-content-start align-items-center my-2">
                    <i class="fas fa-play-circle fa-lg" style="margin-right: 35px;"></i>
                    <h5 class="text-truncate text-sm">PLAYLIST 7</h5>
                </a>
                <a href="#playlist-3" title="Playlist 3" class="list-group-item list-group-item-action d-flex justify-content-start align-items-center my-2">
                    <i class="fas fa-play-circle fa-lg" style="margin-right: 35px;"></i>
                    <h5 class="text-truncate text-sm">PLAYLIST 8</h5>
                </a>
                <a href="#playlist-3" title="Playlist 3" class="list-group-item list-group-item-action d-flex justify-content-start align-items-center my-2">
                    <i class="fas fa-play-circle fa-lg" style="margin-right: 35px;"></i>
                    <h5 class="text-truncate text-sm">PLAYLIST 9</h5>
                </a>
                <a href="#playlist-3" title="Playlist 3" class="list-group-item list-group-item-action d-flex justify-content-start align-items-center my-2">
                    <i class="fas fa-play-circle fa-lg" style="margin-right: 35px;"></i>
                    <h5 class="text-truncate text-sm">PLAYLIST 10</h5>
                </a>
            </div>
        </div>
    </div>
</aside>

<section th:fragment="script">
    <!-- Para cambiar el icono al hacer click -->
    <script>
        $("#megusta").click(function(){
        var elem= document.getElementById("megusta");
        var seguido= 'id del usuario con megusta';
        var seguidor= 'id del usuario activo';
        elem.classList.toggle("bi-heart");
        elem.classList.toggle("bi-heart-fill");
        if (elem.classList.contains('bi-heart')) {
            url = '/nomegusta'
        } else {
            url = "megusta"
        }
        $.ajax({
            url: url,
            data: {
            seguido: seguido,
            seguidor:seguidor
            },
            dataType: 'json'
        })
        })
    </script>

    <!-- Optional JavaScript -->

    <script th:src="@{https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js}"
            integrity="sha384-oBqDVmMz9ATKxIep9tiCxS/Z9fNfEXiDAYTujMAeBAsjFuCZSmKbSSUnQlmh/jp3"
            crossorigin="anonymous"></script>
    <script th:src="@{https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.min.js}"
            integrity="sha384-cuYeSxntonz0PPNlHhBs68uyIAVpIIOZZ5JqeqvYYIcEL727kskC66kF92t6Xl2V"
            crossorigin="anonymous"></script>

    <!-- script para ocultar barra lateral al hacerse la ventana pequeña -->

    <script>
            document.getElementById("toggle-sidebar").addEventListener("click", function(){
            document.querySelector("aside").classList.toggle("d-md-none");
        });
    </script>

    <!-- mostrar/ocultar la barra lateral: -->

    <script>
    $(document).ready(function(){
        $("#toggle-sidebar").click(function(){
        $("#sidebar").toggleClass("d-none");
        });
    });
    </script>

    <!-- Sirve para que cuando te posiciones encima del índice de cada canción de la playlist, este desaparezca y aparece el botón de play -->
    <script>
        $('.index').hover(function() {
        $(this).find('.index-number').hide();
        $(this).find('.fa-play').show();
        }, function() {
        $(this).find('.index-number').show();
        $(this).find('.fa-play').hide();
        });
    </script>

    <!-- Script para que se reproduzca la canción en cuestión y que detecte el reproductor en qué tarjeta se ha clickeado -->
    <script>
        document.querySelectorAll('.song-card').forEach(card => {
        card.addEventListener('click', function () {
            const id = this.getAttribute('data-song-id');
            const src = this.getAttribute('data-song-src');
            const audio = document.querySelector('audio');
            audio.setAttribute('src', src);
            audio.setAttribute('data-song-id', id);
            audio.play();
        });
        });
    </script>

    <!-- Sirve para que aparezca la imagen que subes en el banner -->
    <script>
        document.getElementById("banner-file").addEventListener("change", function(e) {
        var file = e.target.files[0];
        var reader = new FileReader();
        reader.onload = function() {
        var dataURL = reader.result;
        document.getElementById("banner-img").src = dataURL;
        };
        reader.readAsDataURL(file);
        });
    </script>

    <script>
        function showCategory() {
        document.getElementById("category-container").style.display = "block";
        }

        function hideCategory() {
        document.getElementById("category-container").style.display = "none";
        }
    </script>
</section>


</body>
</html>